
{%load static%}
{% csrf_token %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GMR HEALTH-CARE CHATBOT</title>
    <link rel="stylesheet" href="{%static 'css/style.css'%}">
    <link rel="stylesheet" href="{%static 'css/chat.css'%}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.11/typed.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>
    <script>
        $(document).ready(function(){
            $(window).scroll(function(){
                // sticky navbar on scroll script
                if(this.scrollY > 20){
                    $('.navbar').addClass("sticky");
                }else{
                    $('.navbar').removeClass("sticky");
                }
                
                // scroll-up button show/hide script
                if(this.scrollY > 500){
                    $('.scroll-up-btn').addClass("show");
                }else{
                    $('.scroll-up-btn').removeClass("show");
                }
            });
        
            // slide-up script
            $('.scroll-up-btn').click(function(){
                $('html').animate({scrollTop: 0});
                // removing smooth scroll on slide-up button click
                $('html').css("scrollBehavior", "auto");
            });
        
            $('.navbar .menu li a').click(function(){
                // applying again smooth scroll on menu items click
                $('html').css("scrollBehavior", "smooth");
            });
        
            // toggle menu/navbar script
            $('.menu-btn').click(function(){
                $('.navbar .menu').toggleClass("active");
                $('.menu-btn i').toggleClass("active");
            });
        
            // typing text animation script
            var typed = new Typed(".typing", {
                strings: ["Answering Queries","Suggesting Medicines","providing info about Doctors"],
                typeSpeed: 100,
                backSpeed: 60,
                loop: true
            });
        
            var typed = new Typed(".typing-2", {
                strings: ["Answering Queries","Suggesting Medicines","providing info about Doctors"],
                typeSpeed: 100,
                backSpeed: 60,
                loop: true
            });
        
            // owl carousel script
            $('.carousel').owlCarousel({
                margin: 20,
                loop: true,
                autoplay: true,
                autoplayTimeOut: 2000,
                autoplayHoverPause: true,
                responsive: {
                    0:{
                        items: 1,
                        nav: false
                    },
                    600:{
                        items: 2,
                        nav: false
                    },
                    1000:{
                        items: 3,
                        nav: false
                    }
                }
            });
        });
         
    </script>
</head>
{%load static%}
<body>
        <div class="chatbox">
            <div class="chatbox__support">
                <div class="chatbox__header">
                    <div class="chatbox__image--header">
                        <img src="https://img.icons8.com/color/48/000000/circled-user-male-skin-type-5--v1.png" alt="image">
                    </div>
                    <div class="chatbox__content--header">
                        <h4 class="chatbox__heading--header">Chat Support</h4>
                        <p class="chatbox__description--header">Hi. My name is <span style="color:#fff">GMRIT MED-BOT</span> How can I help you?</p>
                    </div>
                </div>
                <div class="chatbox__messages">
                    <div></div>
                </div>
                <div class="chatbox__footer">
                    <input type="text" placeholder="Write a message...">
                    <button class="chatbox__send--footer send__button">Send</button>
                </div>
            </div>
            <div class="chatbox__button">
          
                <button><img src="{% static 'static/images/chatbox-icon.svg' %}" /></button>

            </div>
        </div>
    <div class="scroll-up-btn">
        <i class="fas fa-angle-up"></i>
    </div>
    <nav class="navbar">
        <div class="max-width">
            <div class="logo"><a href="#">MEDI-<span>DIAGNOS</span></a></div>
            <ul class="menu">
                <li><a href="#home" class="menu-btn">Home</a></li>
                <li><a href="#about" class="menu-btn">About</a></li>
                <li><a href="#services" class="menu-btn">Services</a></li>
                <li><a href="#contact" class="menu-btn">Contact</a></li>
                {% if user.is_authenticated %}
                <li><a href="/logout">Log Out</a></li>
                {% endif %}
                <li><a href="https://github.com/Keyrun1227" target="_blank" class="menu-btn">Admin</a></li>

            </ul>
            <div class="menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>
        <!-- home section start -->
        <section class="home" id="home">
            <div class="max-width">
                <div class="home-content">
                    {% if user.is_authenticated %}
                    <div class="text-1">Hello <b> {{request.session.username|default:"Guest"}}!</b>, my name is</div>
                    <div class="text-2" style="color:red">Medi-Diagnose</div>
                    <div class="text-3" >And I can help Patients <span class="typing"></span></div>
                    <a href="#contact">Make Appointment</a>
                    {% endif %}
                </div>
                <video autoplay muted loop id="bg-video">
                    <source src="/static/images/mainentry.mp4" type="video/mp4">
                    <!-- Include additional sources for different video formats if needed -->
                </video>
            </div>
        </section>
    
        <!-- about section start -->
        <section class="about" id="about" >
            <div class="max-width">
                <h2 class="title">About</h2>
                <div class="about-content">
                    <div class="column left">
                        {% load static %}
                        <img src="{% static 'images/a.jpg' %}" />
    
                    </div>
                    <div class="column right">
                        <div class="text" >Medi-Assistant is a Conversational AI Model <span class="typing-2"></span></div>
                        <p ><b>Medi-Diagnos </b> is your trusted healthcare companion, offering accurate medical predictions and image-based diagnostics. Our platform combines cutting-edge technology with personalized care to empower you with quick and reliable health insights. 

                            <p > <b>Medi-Assistant</b> is a versatile chatbot for medical queries with multi-language support. It's trained in English but expanded to understand and respond in various languages, enhancing accessibility for medical assistance worldwide.</p>
                        </p>
                        <a href="#services">available services</a>
                    </div>
                </div>
            </div>
        </section>
    
        
    <section class="services" id="services">
        <div class="contain">
            <div class="bx">
                <span></span>
                <div class="cont">
                    <h2>Dental Cavity</h2>
                    <p>
                        Enhance your dental care with our AI-powered dental cavity detection service, quickly identifying cavities in uploaded images for improved oral health.
                    </p>
                  
                    <a href="{% url 'dental_view' %}">Try it Now</a>
    
    
                </div>
            </div>
            <div class="bx">
                <span></span>
                <div class="cont">
                    <h2>Protein Stability Prediction</h2>
                    <p>
                        Our model predicts protein stability based on the given amino acid sequence and pH level. It helps researchers and scientists understand how proteins behave under different conditions.
                    </p>
                    <a href="{% url 'get_prediction' %}">Try it Now</a>
                </div>
            </div>
            
            <div class="bx">
                <span></span>
                <div class="cont">
                    <h2>Pneumonia Prediction</h2>
                    <p>
                        Our AI model analyzes chest X-ray images to predict the presence of pneumonia. It helps healthcare professionals make faster and more accurate diagnoses.
                    </p>
                    <a href="{% url 'predict_pneumonia' %}">Try it Now</a>
                </div>
            </div>
            
            <div class="bx">
                <span></span>
                <div class="cont">
                    <h2>Brain MRI Segmentation</h2>
                    <p>
                        Our model performs brain MRI segmentation to identify regions of interest. Upload an MRI image to see the segmentation results.
                    </p>
                    <a href="{% url 'brain_mri_segmentation' %}">Try it Now</a>
                </div>
            </div>
            
            <div class="bx">
                <span></span>
                <div class="cont">
                    <h2>Diabetes Assistant</h2>
                    <p>
                        Our model predicts diabetes risk based on various health factors. Provide your details to get your prediction.
                    </p>
                    <a href="{% url 'predict_diabetes' %}">Try it Now</a>
                </div>
            </div>
            
            
            <div class="bx">
                <span></span>
                <div class="cont">
                    <h2>Medi Assistant</h2>
                    <p>
                        Medi-Assistant Chatbot: This HTML produces a responsive "Medi-Assistant" medical app with a stylish design, language translation, and chatbot capabilities, assisting medical professionals in various languages.
                    </p>
                    <a href="{% url 'predict' %}">Try it Now</a>
                 
                </div>
            </div>
            
        </div>
    </section>
    
    
       
    
        <!-- contact section start -->
        <section class="contact" id="contact">
            <div class="max-width">
                <h2 class="title">Contact me</h2>
                <div class="contact-content">
                    <div class="column left">
                        <div class="text">Get in Touch</div>
                        <p>One of the key benefits of me is my ability to provide 24/7 access to health information and support, which can be particularly helpful for people who have limited access to medical care or live in remote areas</p>
                        <div class="icons">
                            <div class="row">
                                <i class="fas fa-user"></i>
                                <div class="info">
                                    <div class="head">Name</div>
                                    <div class="sub-title">Medi-bot</div>
                                </div>
                            </div>
                            <div class="row">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="info">
                                    <div class="head">Address</div>
                                    <div class="sub-title">Rajam, Andhra Pradesh</div>
                                </div>
                            </div>
                            <div class="row">
                                <i class="fas fa-envelope"></i>
                                <div class="info">
                                    <div class="head">Email</div>
                                    <div class="sub-title">chitturidurgasatyasaikiran@gmail.com</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column right">
                        <div class="text">Message me</div>
                            <form method="post" action="/appoint">
                                {% csrf_token %}
                            <div class="fields">
                                <div class="field name">
                                    <input type="text" placeholder="Enter Your Name" required>
                                </div>
                                <div class="field email">
                                    <input type="email" name="gmailid"  placeholder="Enter Your Email" required>
                                </div>
                            </div>
                            <div class="field">
                                <input type="text" name="subject" placeholder="Subject" required>
                            </div>
                            <div class="field textarea">
                                <textarea cols="30" rows="10" name="messages" placeholder="Message.." required></textarea>
                            </div>
                            <div class="button-area">
                                <button type="submit">Send message</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    
        <!-- footer section start -->
        <footer>
            <span>Created By <a href="https://www.linkedin.com/in/durga-satya-sai-kiran-chitturi-69abba220" target="_blank">Kiran</a> | <span class="far fa-copyright"></span> 2021 All rights reserved.</span>
        </footer>
        <script>
            class Chatbox {
                constructor() {
                    this.args = {
                        openButton: document.querySelector(".chatbox__button"),
                        chatBox: document.querySelector(".chatbox__support"),
                        sendButton: document.querySelector(".send__button"),
                    };
    
                    this.state = false;
                    this.messages = [];
                }
    
                display() {
                    const { openButton, chatBox, sendButton } = this.args;
    
                    openButton.addEventListener("click", () => this.toggleState(chatBox));
    
                    sendButton.addEventListener("click", () =>
                        this.onSendButton(chatBox)
                    );
    
                    const node = chatBox.querySelector("input");
                    node.addEventListener("keyup", ({ key }) => {
                        if (key === "Enter") {
                            this.onSendButton(chatBox);
                        }
                    });
                }
    
                toggleState(chatbox) {
                    this.state = !this.state;
    
                    // show or hides the box
                    if (this.state) {
                        chatbox.classList.add("chatbox--active");
                    } else {
                        chatbox.classList.remove("chatbox--active");
                    }
                }
    
                onSendButton(chatbox) {
                    var textField = chatbox.querySelector("input");
                    let text1 = textField.value;
                    if (text1 === "") {
                        return;
                    }
    
                    let msg1 = { name: "User", message: text1 };
                    this.messages.push(msg1);
                    fetch('http://127.0.0.1:8000/predict', {
                        method: 'POST',
                        body: JSON.stringify({ message: text1 }),
                        mode: 'cors',
                        headers: {
                          'Content-Type': 'application/json'
                        },
                    })
                        .then((r) => r.json())
                        .then((r) => {
                            let msg2 = { name: "GMRIT", message: r.answer };
                            this.messages.push(msg2);
                            this.updateChatText(chatbox);
                            textField.value = "";
                        })
                        .catch((error) => {
                            console.error("Error:", error);
                            this.updateChatText(chatbox);
                        })
                }
                updateChatText(chatbox) {
                    var html = '';
                    this.messages.slice().reverse().forEach(function(item, index) {
                        if (item.name === "GMRIT")
                        {
                            html += '<div class="messages__item messages__item--visitor">' + item.message + '</div>'
                        }
                        else
                        {
                            html += '<div class="messages__item messages__item--operator">' + item.message + '</div>'
                        }
                      });
                    const chatmessage = chatbox.querySelector('.chatbox__messages');
                    chatmessage.innerHTML = html;
                }
                
            }
            
            
            
            const chatbox = new Chatbox();
            chatbox.display();
            
        </script>
    </body>
    </html>
    
    